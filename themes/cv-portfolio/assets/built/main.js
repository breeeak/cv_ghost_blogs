!function(){const e=document.documentElement,t=document.querySelector(".theme-dropdown");if(!t)return;const n=t.querySelector(".theme-toggle"),r=t.querySelector("#theme-menu"),o=Array.from(r.querySelectorAll(".menu-item")),a=t.querySelector(".theme-icon");const c=window.matchMedia("(prefers-color-scheme: dark)");function i(e){a.innerHTML="auto"!==e?"dark"===e?'<svg aria-hidden="true" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>':'<svg aria-hidden="true" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="4"></circle><path d="M12 2v2M12 20v2M4.93 4.93l1.41 1.41M17.66 17.66l1.41 1.41M2 12h2M20 12h2M4.93 19.07l1.41-1.41M17.66 6.34l1.41-1.41"></path></svg>':c.matches?'<svg aria-hidden="true" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>':'<svg aria-hidden="true" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="4"></circle><path d="M12 2v2M12 20v2M4.93 4.93l1.41 1.41M17.66 17.66l1.41 1.41M2 12h2M20 12h2M4.93 19.07l1.41-1.41M17.66 6.34l1.41-1.41"></path></svg>'}function l(t){"auto"===t?e.removeAttribute("data-theme"):e.dataset.theme=t,o.forEach(e=>e.setAttribute("aria-checked",String(e.dataset.mode===t))),i(t)}let d=localStorage.getItem("theme-mode")||"auto";function s(){r.hidden=!0,n.setAttribute("aria-expanded","false")}l(d),n.addEventListener("click",()=>{"true"===n.getAttribute("aria-expanded")?s():(r.hidden=!1,n.setAttribute("aria-expanded","true"))}),r.addEventListener("click",e=>{const t=e.target.closest(".menu-item");t&&(d=t.dataset.mode,localStorage.setItem("theme-mode",d),l(d),s())}),document.addEventListener("click",e=>{t.contains(e.target)||s()}),c.addEventListener("change",()=>{"auto"===d&&i("auto")})}(),function(){function e(e){return document.getElementById(`carousel-${e}`)}document.querySelectorAll(".carousel-arrow").forEach(t=>{t.addEventListener("click",()=>{const n=e(t.dataset.target);if(!n)return;const r=t.classList.contains("next")?1:-1,o=.9*n.clientWidth;n.scrollBy({left:r*o,behavior:"smooth"})})});[{id:"exp",el:e("exp")},{id:"projects",el:e("projects")}].filter(e=>e.el).forEach(({id:e,el:t})=>{let n,r=1,o=0;!function e(){const a=performance.now();if(!(a<o)){t.scrollLeft+=1.2*r;const e=t.scrollWidth-t.clientWidth;t.scrollLeft<=0?(r=1,o=a+400):t.scrollLeft>=e-1&&(r=-1,o=a+400)}n=requestAnimationFrame(e)}(),t.addEventListener("wheel",e=>{const n=Math.abs(e.deltaX),r=Math.abs(e.deltaY),a=performance.now();n>r+2?o=a+1500:r>n+2&&(t.scrollLeft+=e.deltaY,o=a+1500,e.preventDefault())},{passive:!1});const a=t.closest(".carousel");if(a){a.querySelectorAll(".carousel-arrow").forEach(e=>e.setAttribute("hidden","hidden"));const i=document.createElement("div");i.className="carousel-controls";const l=document.createElement("button");l.className="carousel-control prev",l.type="button",l.setAttribute("aria-label","Previous"),l.textContent="‹";const d=document.createElement("button");function c(e){const n=.9*t.clientWidth;t.scrollBy({left:e*n,behavior:"smooth"}),o=performance.now()+1200}d.className="carousel-control next",d.type="button",d.setAttribute("aria-label","Next"),d.textContent="›",i.appendChild(l),i.appendChild(d),a.appendChild(i),l.addEventListener("click",()=>c(-1)),d.addEventListener("click",()=>c(1))}})}(),function(){const e=document.querySelector(".menu-toggle"),t=document.getElementById("mobile-menu");function n(){t.hidden=!0,e.setAttribute("aria-expanded","false")}e&&t&&(e.addEventListener("click",()=>{"true"===e.getAttribute("aria-expanded")?n():(t.hidden=!1,e.setAttribute("aria-expanded","true"))}),document.addEventListener("click",r=>{t.contains(r.target)||e.contains(r.target)||n()}))}(),function(){const e=document.querySelector(".lang-dropdown");if(!e)return;const t=e.querySelector(".lang-toggle"),n=e.querySelector("#lang-menu"),r=Array.from(n.querySelectorAll(".menu-item")),o=e.querySelector(".lang-icon");function a(e,t){const n=function(e){const t=document.querySelector(`meta[name="alt-lang-${e}"]`);return t&&t.getAttribute("content")}(t);if(n)return n;const r=e.match(/^\/(zh\/)?blog\/([A-Za-z0-9\-]+)\/?$/);if(!r)return null;Boolean(r[1]);const o=r[2];if("zh"===t){return`/zh/blog/${o.endsWith("-zh")?o:o+"-zh"}/`}return`/blog/${o.endsWith("-zh")?o.slice(0,-3):o}/`}function c(){n.hidden=!0,t.setAttribute("aria-expanded","false")}!function(){const e="/zh/"===(t=location.pathname)||t.startsWith("/zh/");var t;try{document.documentElement.setAttribute("lang",e?"zh":"en")}catch(e){}o.textContent=e?"中":"EN",r.forEach(t=>t.setAttribute("aria-checked",String(t.dataset.lang===(e?"zh":"en")))),document.querySelectorAll(".nav-en").forEach(t=>t.hidden=!!e),document.querySelectorAll(".nav-zh").forEach(t=>t.hidden=!e)}(),t.addEventListener("click",()=>{"true"===t.getAttribute("aria-expanded")?c():(n.hidden=!1,t.setAttribute("aria-expanded","true"))}),n.addEventListener("click",e=>{const t=e.target.closest(".menu-item");if(!t)return;const n=t.dataset.lang,{pathname:r,search:o,hash:c}=window.location;let i=null;(function(e){return/^\/(zh\/)?blog\/[A-Za-z0-9\-]+\/?$/.test(e)})(r)&&(i=a(r,n)),i||(i="zh"===n?function(e){return"/"===e?"/zh/":e.startsWith("/zh/")?e:"/zh"+e}(r):function(e){return e.startsWith("/zh/")?e.slice(3)||"/":e}(r));const l=i+(o||"")+(c||"");window.location.href=l}),document.addEventListener("click",t=>{e.contains(t.target)||c()})}();